<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="37,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%%Copyright 2017 UON Leapheng, Calvin Ng, Francis Ng, Sharaful-Ilmi Paduman</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%  This file is part of NC-Code-Improvement.</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%    NC-Code-Improvement is free software: you can redistribute it and/or modify</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%    it under the terms of the GNU General Public License as published by</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%    the Free Software Foundation, either version 3 of the License, or</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%    (at your option) any later version.</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,10" id="srcline10">10</a></span><span class="line"><span class="comment">%    NC-Code-Improvement is distributed in the hope that it will be useful,</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,11" id="srcline11">11</a></span><span class="line"><span class="comment">%    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,12" id="srcline12">12</a></span><span class="line"><span class="comment">%    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,13" id="srcline13">13</a></span><span class="line"><span class="comment">%    GNU General Public License for more details.</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,14" id="srcline14">14</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,15" id="srcline15">15</a></span><span class="line"><span class="comment">%    You should have received a copy of the GNU General Public License</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,16" id="srcline16">16</a></span><span class="line"><span class="comment">%    along with NC-Code-Improvement.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,17" id="srcline17">17</a></span><span class="line"><span class="comment">%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,18" id="srcline18">18</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T38U3">line</span>] = segregateLines(<span class="var type2" id="S3T40V1U6">codeArray</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="37,19" id="srcline19">19</a></span><span class="line"><span class="comment"><span class="comment">%{</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="37,20" id="srcline20">20</a></span><span class="line"><span class="comment">Objective: Structure the data from the lines of code based on the pertinent</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,21" id="srcline21">21</a></span><span class="line"><span class="comment">    letter addresses.</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,22" id="srcline22">22</a></span><span class="line"><span class="comment">  </span></span></span>
<span class="srcline"><span class="lineno"><a href="37,23" id="srcline23">23</a></span><span class="line"><span class="comment">Input:     </span></span></span>
<span class="srcline"><span class="lineno"><a href="37,24" id="srcline24">24</a></span><span class="line"><span class="comment">    codeArray = cell array of strings that each contains lines of code</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,25" id="srcline25">25</a></span><span class="line"><span class="comment">Output:    </span></span></span>
<span class="srcline"><span class="lineno"><a href="37,26" id="srcline26">26</a></span><span class="line"><span class="comment">    line = the structured line data</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,27" id="srcline27">27</a></span><span class="line"><span class="comment">        where:</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,28" id="srcline28">28</a></span><span class="line"><span class="comment">            line.N = line number</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,29" id="srcline29">29</a></span><span class="line"><span class="comment">            line.M = M-code, for starting and ending the program, among</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,30" id="srcline30">30</a></span><span class="line"><span class="comment">                other purposes</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,31" id="srcline31">31</a></span><span class="line"><span class="comment">            line.G = G-code, for the type of tool movement</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,32" id="srcline32">32</a></span><span class="line"><span class="comment">            line.X = X-coordinate of destination, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,33" id="srcline33">33</a></span><span class="line"><span class="comment">            line.Y = Y-coordinate of destination, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,34" id="srcline34">34</a></span><span class="line"><span class="comment">            line.Z = Z-coordinate of destination, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,35" id="srcline35">35</a></span><span class="line"><span class="comment">            line.I = X-coordinate of circular center, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,36" id="srcline36">36</a></span><span class="line"><span class="comment">            line.J = Y-coordinate of circular center, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,37" id="srcline37">37</a></span><span class="line"><span class="comment">            line.K = Z-coordinate of circular center, absolute coordinates</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,38" id="srcline38">38</a></span><span class="line"><span class="comment">            line.F = feed rate     </span></span></span>
<span class="srcline"><span class="lineno"><a href="37,39" id="srcline39">39</a></span><span class="line"><span class="comment"><span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="37,40" id="srcline40">40</a></span><span class="line"><span class="comment">%% Initialize Line Structure</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,41" id="srcline41">41</a></span><span class="line"><span class="var type1" id="S4T38U10">sample</span>.N=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,42" id="srcline42">42</a></span><span class="line"><span class="var type1" id="S4T38U17">sample</span>.M=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,43" id="srcline43">43</a></span><span class="line"><span class="var type1" id="S4T38U24">sample</span>.G=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,44" id="srcline44">44</a></span><span class="line"><span class="var type1" id="S4T38U31">sample</span>.X=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,45" id="srcline45">45</a></span><span class="line"><span class="var type1" id="S4T38U38">sample</span>.Y=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,46" id="srcline46">46</a></span><span class="line"><span class="var type1" id="S4T38U45">sample</span>.Z=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,47" id="srcline47">47</a></span><span class="line"><span class="var type1" id="S4T38U52">sample</span>.I=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,48" id="srcline48">48</a></span><span class="line"><span class="var type1" id="S4T38U59">sample</span>.J=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,49" id="srcline49">49</a></span><span class="line"><span class="var type1" id="S4T38U66">sample</span>.K=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,50" id="srcline50">50</a></span><span class="line"><span class="var type1" id="S4T38U73">sample</span>.F=[];</span></span>
<span class="srcline"><span class="lineno"><a href="37,51" id="srcline51">51</a></span><span class="line"><span class="var type0" id="S2T0U79">line</span>=repmat(<span class="var type1" id="S4T38U82">sample</span>,length(<span class="var type1" id="S3T40U85">codeArray</span>),1);</span></span>
<span class="srcline"><span class="lineno"><a href="37,52" id="srcline52">52</a></span><span class="line"><span class="comment">%% Populate Line Structure</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,53" id="srcline53">53</a></span><span class="line"><span class="var type1" id="S7T7U89">n</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="37,54" id="srcline54">54</a></span><span class="line"><span class="keyword">while</span> <span class="var type1" id="S7T7U93">n</span>&lt;=length(<span class="var type1" id="S3T40U96">codeArray</span>)     </span></span>
<span class="srcline"><span class="lineno"><a href="37,55" id="srcline55">55</a></span><span class="line">    <span class="message error" id="M2F99C">[<span class="var type0" id="S8T0U100"><span class="message error" id="M3F99C">values</span></span>,<span class="var type0" id="S9T0U101"><span class="message error" id="M4F99C">labels</span></span>]=<span class="fcn" id="F119N9:B103">stringParser</span>(<span class="var type1" id="S3T40U105">codeArray</span>{<span class="var type1" id="S7T7U106">n</span>})</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="37,56" id="srcline56">56</a></span><span class="line">    <span class="var type1" id="S11T7U109">x</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="37,57" id="srcline57">57</a></span><span class="line">    <span class="keyword">while</span> <span class="var type1" id="S11T7U113">x</span>&lt;=length(<span class="var type0" id="S9T0U116"><span class="message error" id="M5F99C">labels</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="37,58" id="srcline58">58</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U121"><span class="message error" id="M6F99C">labels</span></span>{<span class="var type0" id="S11T0U122">x</span>}==<span class="string">'N'</span>, <span class="var type0" id="S2T0U128">line</span>(<span class="var type0" id="S7T0U129">n</span>).N=str2double(<span class="var type0" id="S8T0U134"><span class="message error" id="M7F99C">values</span></span>{<span class="var type0" id="S11T0U135">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,59" id="srcline59">59</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U140"><span class="message error" id="M8F99C">labels</span></span>{<span class="var type0" id="S11T0U141">x</span>}==<span class="string">'M'</span>, <span class="var type0" id="S2T0U147">line</span>(<span class="var type0" id="S7T0U148">n</span>).M=str2double(<span class="var type0" id="S8T0U153"><span class="message error" id="M9F99C">values</span></span>{<span class="var type0" id="S11T0U154">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,60" id="srcline60">60</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U159"><span class="message error" id="M10F99C">labels</span></span>{<span class="var type0" id="S11T0U160">x</span>}==<span class="string">'G'</span>, <span class="var type0" id="S2T0U166">line</span>(<span class="var type0" id="S7T0U167">n</span>).G=str2double(<span class="var type0" id="S8T0U172"><span class="message error" id="M11F99C">values</span></span>{<span class="var type0" id="S11T0U173">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,61" id="srcline61">61</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U178"><span class="message error" id="M12F99C">labels</span></span>{<span class="var type0" id="S11T0U179">x</span>}==<span class="string">'X'</span>, <span class="var type0" id="S2T0U185">line</span>(<span class="var type0" id="S7T0U186">n</span>).X=str2double(<span class="var type0" id="S8T0U191"><span class="message error" id="M13F99C">values</span></span>{<span class="var type0" id="S11T0U192">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,62" id="srcline62">62</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U197"><span class="message error" id="M14F99C">labels</span></span>{<span class="var type0" id="S11T0U198">x</span>}==<span class="string">'Y'</span>, <span class="var type0" id="S2T0U204">line</span>(<span class="var type0" id="S7T0U205">n</span>).Y=str2double(<span class="var type0" id="S8T0U210"><span class="message error" id="M15F99C">values</span></span>{<span class="var type0" id="S11T0U211">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,63" id="srcline63">63</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U216"><span class="message error" id="M16F99C">labels</span></span>{<span class="var type0" id="S11T0U217">x</span>}==<span class="string">'Z'</span>, <span class="var type0" id="S2T0U223">line</span>(<span class="var type0" id="S7T0U224">n</span>).Z=str2double(<span class="var type0" id="S8T0U229"><span class="message error" id="M17F99C">values</span></span>{<span class="var type0" id="S11T0U230">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,64" id="srcline64">64</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U235"><span class="message error" id="M18F99C">labels</span></span>{<span class="var type0" id="S11T0U236">x</span>}==<span class="string">'I'</span>, <span class="var type0" id="S2T0U242">line</span>(<span class="var type0" id="S7T0U243">n</span>).I=str2double(<span class="var type0" id="S8T0U248"><span class="message error" id="M19F99C">values</span></span>{<span class="var type0" id="S11T0U249">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,65" id="srcline65">65</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U254"><span class="message error" id="M20F99C">labels</span></span>{<span class="var type0" id="S11T0U255">x</span>}==<span class="string">'J'</span>, <span class="var type0" id="S2T0U261">line</span>(<span class="var type0" id="S7T0U262">n</span>).J=str2double(<span class="var type0" id="S8T0U267"><span class="message error" id="M21F99C">values</span></span>{<span class="var type0" id="S11T0U268">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,66" id="srcline66">66</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U273"><span class="message error" id="M22F99C">labels</span></span>{<span class="var type0" id="S11T0U274">x</span>}==<span class="string">'K'</span>, <span class="var type0" id="S2T0U280">line</span>(<span class="var type0" id="S7T0U281">n</span>).K=str2double(<span class="var type0" id="S8T0U286"><span class="message fatal" id="M23F99C">values</span></span>{<span class="var type0" id="S11T0U287">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,67" id="srcline67">67</a></span><span class="line">        <span class="keyword">if</span> <span class="var type0" id="S9T0U292">labels</span>{<span class="var type0" id="S11T0U293">x</span>}==<span class="string">'F'</span>, <span class="var type0" id="S2T0U299">line</span>(<span class="var type0" id="S7T0U300">n</span>).F=str2double(<span class="var type0" id="S8T0U305">values</span>{<span class="var type0" id="S11T0U306">x</span>}); <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,68" id="srcline68">68</a></span><span class="line">        <span class="var type0" id="S11T0U309">x</span>=<span class="var type0" id="S11T0U311">x</span>+1;</span></span>
<span class="srcline"><span class="lineno"><a href="37,69" id="srcline69">69</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,70" id="srcline70">70</a></span><span class="line">    <span class="var type0" id="S7T0U315">n</span>=<span class="var type0" id="S7T0U317">n</span>+1;</span></span>
<span class="srcline"><span class="lineno"><a href="37,71" id="srcline71">71</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="37,72" id="srcline72">72</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
